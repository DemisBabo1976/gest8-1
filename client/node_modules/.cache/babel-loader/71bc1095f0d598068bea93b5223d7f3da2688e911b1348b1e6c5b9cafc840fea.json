{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api/menu/prodotti';\n\n// Ottieni tutti i prodotti\nexport const getProdotti = async () => {\n  try {\n    const response = await axios.get(API_URL);\n    return response.data;\n  } catch (error) {\n    console.error('Errore nel recupero dei prodotti:', error);\n    throw error;\n  }\n};\n\n// Ottieni un prodotto specifico\nexport const getProdotto = async id => {\n  try {\n    const response = await axios.get(`${API_URL}/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Errore nel recupero del prodotto ${id}:`, error);\n    throw error;\n  }\n};\n\n// Crea un nuovo prodotto con immagine\nexport const createProdotto = async prodottoData => {\n  try {\n    // Utilizziamo FormData per inviare sia i dati che l'immagine\n    const formData = new FormData();\n\n    // Aggiungi tutti i campi del prodotto\n    Object.keys(prodottoData).forEach(key => {\n      if (key === 'immagine' && prodottoData[key] instanceof File) {\n        formData.append(key, prodottoData[key]);\n      } else if (key === 'ingredienti' || key === 'allergeni') {\n        // Gestisci array convertendoli in stringhe JSON\n        formData.append(key, JSON.stringify(prodottoData[key]));\n      } else {\n        formData.append(key, prodottoData[key]);\n      }\n    });\n    const response = await axios.post(API_URL, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Errore nella creazione del prodotto:', error);\n    throw error;\n  }\n};\n\n// Aggiorna un prodotto con possibile immagine\nexport const updateProdotto = async (id, prodottoData) => {\n  try {\n    const formData = new FormData();\n\n    // Aggiungi tutti i campi aggiornati\n    Object.keys(prodottoData).forEach(key => {\n      if (key === 'immagine' && prodottoData[key] instanceof File) {\n        formData.append(key, prodottoData[key]);\n      } else if (key === 'ingredienti' || key === 'allergeni') {\n        // Gestisci array convertendoli in stringhe JSON\n        formData.append(key, JSON.stringify(prodottoData[key]));\n      } else {\n        formData.append(key, prodottoData[key]);\n      }\n    });\n    const response = await axios.put(`${API_URL}/${id}`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(`Errore nell'aggiornamento del prodotto ${id}:`, error);\n    throw error;\n  }\n};\n\n// Elimina un prodotto\nexport const deleteProdotto = async id => {\n  try {\n    const response = await axios.delete(`${API_URL}/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Errore nell'eliminazione del prodotto ${id}:`, error);\n    throw error;\n  }\n};\n\n// Cambia lo stato attivo/inattivo di un prodotto\nexport const toggleProdottoAttivo = async id => {\n  try {\n    const response = await axios.patch(`${API_URL}/${id}/toggle-attivo`);\n    return response.data;\n  } catch (error) {\n    console.error(`Errore nella modifica dello stato del prodotto ${id}:`, error);\n    throw error;\n  }\n};\n\n// Cambia lo stato di promozione di un prodotto\nexport const toggleProdottoPromozione = async id => {\n  try {\n    const response = await axios.patch(`${API_URL}/${id}/toggle-promozione`);\n    return response.data;\n  } catch (error) {\n    console.error(`Errore nella modifica dello stato di promozione del prodotto ${id}:`, error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_URL","getProdotti","response","get","data","error","console","getProdotto","id","createProdotto","prodottoData","formData","FormData","Object","keys","forEach","key","File","append","JSON","stringify","post","headers","updateProdotto","put","deleteProdotto","delete","toggleProdottoAttivo","patch","toggleProdottoPromozione"],"sources":["C:/Users/demis/Desktop/gest8/client/src/services/menuService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api/menu/prodotti';\r\n\r\n// Ottieni tutti i prodotti\r\nexport const getProdotti = async () => {\r\n  try {\r\n    const response = await axios.get(API_URL);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Errore nel recupero dei prodotti:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Ottieni un prodotto specifico\r\nexport const getProdotto = async (id) => {\r\n  try {\r\n    const response = await axios.get(`${API_URL}/${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Errore nel recupero del prodotto ${id}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Crea un nuovo prodotto con immagine\r\nexport const createProdotto = async (prodottoData) => {\r\n  try {\r\n    // Utilizziamo FormData per inviare sia i dati che l'immagine\r\n    const formData = new FormData();\r\n    \r\n    // Aggiungi tutti i campi del prodotto\r\n    Object.keys(prodottoData).forEach(key => {\r\n      if (key === 'immagine' && prodottoData[key] instanceof File) {\r\n        formData.append(key, prodottoData[key]);\r\n      } else if (key === 'ingredienti' || key === 'allergeni') {\r\n        // Gestisci array convertendoli in stringhe JSON\r\n        formData.append(key, JSON.stringify(prodottoData[key]));\r\n      } else {\r\n        formData.append(key, prodottoData[key]);\r\n      }\r\n    });\r\n    \r\n    const response = await axios.post(API_URL, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });\r\n    \r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Errore nella creazione del prodotto:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Aggiorna un prodotto con possibile immagine\r\nexport const updateProdotto = async (id, prodottoData) => {\r\n  try {\r\n    const formData = new FormData();\r\n    \r\n    // Aggiungi tutti i campi aggiornati\r\n    Object.keys(prodottoData).forEach(key => {\r\n      if (key === 'immagine' && prodottoData[key] instanceof File) {\r\n        formData.append(key, prodottoData[key]);\r\n      } else if (key === 'ingredienti' || key === 'allergeni') {\r\n        // Gestisci array convertendoli in stringhe JSON\r\n        formData.append(key, JSON.stringify(prodottoData[key]));\r\n      } else {\r\n        formData.append(key, prodottoData[key]);\r\n      }\r\n    });\r\n    \r\n    const response = await axios.put(`${API_URL}/${id}`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });\r\n    \r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Errore nell'aggiornamento del prodotto ${id}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Elimina un prodotto\r\nexport const deleteProdotto = async (id) => {\r\n  try {\r\n    const response = await axios.delete(`${API_URL}/${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Errore nell'eliminazione del prodotto ${id}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Cambia lo stato attivo/inattivo di un prodotto\r\nexport const toggleProdottoAttivo = async (id) => {\r\n  try {\r\n    const response = await axios.patch(`${API_URL}/${id}/toggle-attivo`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Errore nella modifica dello stato del prodotto ${id}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Cambia lo stato di promozione di un prodotto\r\nexport const toggleProdottoPromozione = async (id) => {\r\n  try {\r\n    const response = await axios.patch(`${API_URL}/${id}/toggle-promozione`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Errore nella modifica dello stato di promozione del prodotto ${id}:`, error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}